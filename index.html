<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body>
    <div class="scoreboard">
        <img class="scoreboard" id="scroll" src="assets/scoreboard.png" width="150px" height="200px">
        <img class="scoreboard" id="tally1" src="assets/tally player/tallyplayer0.png">
        <img class="scoreboard" id="tally2" src="assets/tally enemy/tallyenemy0.png" >
    </div>
    <div class="container">
        <img id="enemy" src="assets/enemy-rock.png">
    </div>
    <div class="move">
        <div class="score"></div>
        <img id="my-move" src="assets/player-rock.png">
    </div>>
    <div class="container choices">
        <input type="image" src="assets/player-rock.png" hand="rock"></input>
        <input type="image" src="assets/player-scissors.png" hand="scissors"></input>
        <input type="image" src="assets/player-paper.png "hand="paper"></input>
    </div>
    <script>
        const buttons = document.querySelectorAll('input');
        buttons.forEach(button => button.addEventListener('click',checkHand));
        
        playerscore = 0;
        enemscore = 0;

        function checkHand(e) {
                var hands = ["paper", "scissors", "rock"];
                var enem_selection = hands[(Math.floor(Math.random()*3))];
                var player_selection = this.getAttribute("hand")
                var myMove = document.getElementById("my-move");
                var enemImg = document.getElementById("enemy");

                changeImage(enemImg, `assets/enemy-${enem_selection}.png`);
                changeImage(myMove, (`assets/player-${player_selection}.png`));
                setTimeout(function() {
                    changeImage(enemImg, `assets/enemy-rock.png`);
                    changeImage(myMove, (`assets/player-rock.png`));
                }, 800);
                console.log(checkWin(player_selection, enem_selection));
        }
        function score(player) {
            if(player === 'player'){playerscore++;}else{enemscore++;}
            
            console.log(playerscore);
            console.log(enemscore);
            renderScore(playerscore, enemscore)
            if(playerscore == 5 || enemscore == 5) {
                win(player);
            }
        }
        function win(player) {
            alert(`${player} wins!`);
        }

        function renderScore(score1,score2) {
            if(score1 >5){score1 =5;}
            if(score2 >5){score2 =5;}
            changeImage(document.getElementById('tally1'), `assets/tally player/tallyplayer${score1}.png`);
            changeImage(document.getElementById('tally2'), `assets/tally enemy/tallyenemy${score2}.png`);
        }

        function checkWin(p1, p2) {
            if(p1===p2){
                return "its a tie!";
            }
            if(p1==='paper'){
                if(p2==='scissors'){
                    score('enemy');
                    return "enemy wins!";
                } else {
                    score('player');
                    return "you win!";
                }
            }
            if(p1==='scissors'){
                if(p2==='rock'){
                    score('enemy');
                    return "enemy wins!";
                } else {
                    score('player');
                    return "you win!";
                }
            }
            if(p1==='rock'){
                if(p2==='paper'){
                    score('enemy');
                    return "enemy wins!";
                } else {
                    score('player');
                    return "you win!";
                }
            }
        }
        
        function changeImage(src, img) {
            src.setAttribute('src', img);
        }
    </script>

</body>
</html>